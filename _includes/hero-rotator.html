<div class="hero-rotator">
  <div class="rotator">
    {% for p in site.data.gallery %}
    <figure class="slide">
      <img src="{{ p.img | relative_url }}" alt="{{ p.caption | escape }}" loading="eager">
      <figcaption>{{ p.caption }}</figcaption>
    </figure>
    {% endfor %}
    <div class="rotator-dots">
      {% for p in site.data.gallery %}<button aria-label="Slide {{ forloop.index }}"></button>{% endfor %}
    </div>
  </div>
</div>
<script>
(function(){
  const r=document.querySelector('.hero-rotator .rotator'); if(!r) return;
  const s=[...r.querySelectorAll('.slide')], d=[...r.querySelectorAll('.rotator-dots button')];
  let i=0,t; const go=n=>{ i=(n+s.length)%s.length; s.forEach((x,k)=>x.classList.toggle('active',k===i)); d.forEach((x,k)=>x.classList.toggle('active',k===i)); };
  const play=()=>t=setInterval(()=>go(i+1),4000), pause=()=>clearInterval(t);
  d.forEach((x,k)=>x.addEventListener('click',()=>{pause();go(k);play();}));
  r.addEventListener('mouseenter',pause); r.addEventListener('mouseleave',play);
  go(0); play();
})();
</script>
