---
layout: default
---

<article class="product container">
  <div class="product-grid">
    <div class="gallery">
      <img id="hero" src="{{ page.featured_image | relative_url }}" alt="{{ page.title }}">
      {% if page.images and page.images.size > 1 %}
      <div class="thumbs">
        {% for img in page.images %}
          <button class="thumb"><img src="{{ img | relative_url }}" alt=""></button>
        {% endfor %}
      </div>
      {% endif %}
    </div>

    <div class="details">
      {% if page.badge %}
        {% assign badge_slug = page.badge | downcase | strip | replace: ' ', '-' | replace: '!', '' %}
        <span class="badge badge-{{ badge_slug }}">{{ page.badge }}</span>
      {% endif %}

      <h1>{{ page.title }}</h1>
      <p class="price">${{ page.price }}</p>

      {% if page.description %}<p class="desc">{{ page.description }}</p>{% endif %}

      {% if page.sizes %}
      <label class="sizes-label">Size</label>
      <div class="sizes">
        {% for s in page.sizes %}
        <label class="size">
          <input type="radio" name="size" value="{{ s }}" {% if forloop.first %}checked{% endif %}> {{ s }}
        </label>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Quantity stepper -->
      <div class="qty-control" data-qty>
        <button type="button" class="qty-btn" data-qty-dec aria-label="Decrease quantity">−</button>
        <span class="qty-val" aria-live="polite">1</span>
        <button type="button" class="qty-btn" data-qty-inc aria-label="Increase quantity">+</button>
      </div>

      {% if page.variant_ids %}
      <button class="btn primary" id="add-to-cart"
        data-variants='{{ page.variant_ids | jsonify }}'
        data-title="{{ page.title }}"
        data-price="{{ page.price }}"
        data-img="{{ page.featured_image | relative_url }}">
        Add to cart
      </button>
      {% endif %}

      {% if page.sku %}<p class="sku">SKU: {{ page.sku }}</p>{% endif %}
    </div>
  </div>
</article>

<script>
/* Product gallery thumbs */
(function(){
  const hero = document.getElementById('hero');
  if(!hero) return;
  document.querySelectorAll('.thumb img').forEach(t=>{
    t.addEventListener('click', ()=>{ hero.src = t.src; hero.decoding='sync'; });
  });
})();

/* Quantity stepper + Add-to-cart */
(function(){
  // stepper (– 1 +)
  document.addEventListener('click', (e)=>{
    const dec = e.target.closest('[data-qty-dec]');
    const inc = e.target.closest('[data-qty-inc]');
    if(!dec && !inc) return;
    const wrap = (dec||inc).closest('[data-qty]');
    const valEl = wrap.querySelector('.qty-val');
    let n = parseInt(valEl.textContent || '1', 10) || 1;
    n += inc ? 1 : -1;
    n = Math.max(1, Math.min(99, n));
    valEl.textContent = n;
  });

  const btn = document.getElementById('add-to-cart');
  if(!btn) return;
  const variants = JSON.parse(btn.dataset.variants || '{}');

  btn.addEventListener('click', ()=>{
    // size (fallback to first variant for one-size items)
    const sel = document.querySelector('input[name="size"]:checked');
    const size = sel ? sel.value : Object.keys(variants)[0];
    const variantId = size && variants[size];

    // quantity from stepper
    const qty = Math.max(1, parseInt(document.querySelector('.qty-val')?.textContent || '1', 10));

    if(!variantId){ alert('Please pick a size.'); return; }

    window.dispatchEvent(new CustomEvent('tm:add', { detail:{
      id:String(variantId), qty,
      title: btn.dataset.title, price: btn.dataset.price, img: btn.dataset.img
    }}));

    // open mini-cart for feedback (if present)
    document.getElementById('mini-cart')?.classList.add('open');
    document.getElementById('cart-overlay')?.classList.add('show');
  });
})();
</script>

<style>
  .product-grid{ display:grid; grid-template-columns:1.2fr 1fr; gap:2rem; align-items:start; }
  .gallery img{ width:100%; border-radius:12px; display:block; }
  .thumbs{ display:flex; gap:.5rem; margin-top:.5rem; flex-wrap:wrap; }
  .thumb{ border:0; background:transparent; padding:0; cursor:pointer; }
  .thumb img{ width:80px; height:80px; object-fit:cover; border-radius:10px; }

  .details .badge{ display:inline-block; margin-bottom:.5rem; padding:.25rem .5rem; border-radius:999px; background:#eef; }
  .price{ font-size:1.25rem; font-weight:600; margin:.25rem 0 1rem; }
  .desc{ margin-bottom:1rem; }
  .sizes{ display:flex; gap:.5rem; margin:.5rem 0 1rem; flex-wrap:wrap; }
  .size{ border:1px solid var(--border); border-radius:10px; padding:.4rem .6rem; cursor:pointer; }
  .size input{ margin-right:.35rem; }

  /* Qty stepper */
  .qty-control{ display:inline-flex; align-items:center; gap:.5rem; margin:.5rem 0 1rem; border:1px solid var(--border); border-radius:10px; padding:.25rem; }
  .qty-btn{ width:32px; height:32px; border:0; background:#f6f6f6; border-radius:8px; font-size:1.1rem; line-height:1; cursor:pointer; }
  .qty-val{ min-width:2ch; text-align:center; font-variant-numeric: tabular-nums; }

  .btn.buy-btn{ display:inline-block; padding:.75rem 1rem; border-radius:12px; background:var(--navy); color:#fff; text-decoration:none; }
  .sku{ margin-top:.5rem; color:var(--muted); font-size:.9rem; }
  @media (max-width:960px){ .product-grid{ grid-template-columns:1fr; } }

  /* ---------- Product badge (pill) ---------- */
  .details .badge{
    display:inline-block;
    margin-bottom:.5rem;
    padding:.28rem .6rem;
    border-radius:999px;
    font-weight:700;
    font-size:.82rem;
    line-height:1;
    border:1px solid var(--border, rgba(11,18,32,.12));
    box-shadow: 0 6px 16px rgba(0,0,0,.08);
    background:#fff;            /* default/fallback */
    color: var(--ink, #0b1220); /* default/fallback */
  }

  /* Map common badges to your site colors (match Shop/Merch) */
  .details .badge.badge-collab{ 
    background: linear-gradient(90deg, var(--brand, #9F1D2D), var(--navy, #3B3C78));
    color:#fff; border-color: transparent;
  }
  .details .badge.badge-new{
    background: var(--brand, #9F1D2D); color:#fff; border-color: transparent;
  }
  .details .badge.badge-bestseller{
    background: var(--navy, #3B3C78); color:#fff; border-color: transparent;
  }
  .details .badge.badge-limited,
  .details .badge.badge-limited-edition{
    background:#111827; color:#fff; border-color: transparent;
  }
  .details .badge.badge-sale{
    background: #e11d48; color:#fff; border-color: transparent;
  }

  /* ---------- Gradient button assurance ---------- */
  .btn.primary{
    background: linear-gradient(90deg, var(--brand, #9F1D2D), var(--navy, #3B3C78));
    color:#fff; border:0;
    font-weight:700;
    box-shadow: 0 10px 24px rgba(20,37,94,.18);
  }
  .btn.primary:hover{ transform: translateY(-1px); }

  /* Optional: make Add to cart full-width on product page */
  #add-to-cart{ width:100%; justify-content:center; border-radius:12px; }

</style>
