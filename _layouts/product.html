---
layout: default
---

<article class="product container">
  <div class="product-grid">

    <!-- Gallery -->
    <div class="gallery">
      <img id="hero" src="{{ page.featured_image | relative_url }}" alt="{{ page.title }}">
      <div class="thumbs" id="thumbs"></div>
    </div>

    <!-- Details -->
    <div class="details">

      <!-- Badge -->
      {% if page.badge %}
        {%- assign br = page.badge | downcase | strip -%}
        {%- if br contains 'collab' -%}
          {%- assign badge_key = 'collab' -%}
        {%- elsif br contains 'best' -%}
          {%- assign badge_key = 'bestseller' -%}
        {%- elsif br contains 'new' -%}
          {%- assign badge_key = 'new' -%}
        {%- elsif br contains 'limited' -%}
          {%- assign badge_key = 'limited' -%}
        {%- elsif br contains 'sale' -%}
          {%- assign badge_key = 'sale' -%}
        {%- else -%}
          {%- assign badge_key = br | replace: ' ', '-' | replace: '!', '' | replace: '.', '' -%}
        {%- endif -%}
        <span class="badge badge-{{ badge_key }}">{{ page.badge }}</span>
      {% endif %}

      <h1>{{ page.title }}</h1>
      <p class="price">${{ page.price | sprintf: "%.2f" }}</p>

      {% if content %}
        <div class="desc">{{ content }}</div>
      {% endif %}

      <!-- Color picker -->
      {% if page.colors %}
        <label>Color</label>
        <div class="colors">
          {% for color in page.colors %}
            <label class="color-option">
              <input type="radio" name="color" value="{{ color }}" {% if forloop.first %}checked{% endif %}>
              {{ color }}
            </label>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Size picker -->
      {% if page.sizes %}
        <label>Size</label>
        <div class="sizes">
          {% for s in page.sizes %}
            <label class="size">
              <input type="radio" name="size" value="{{ s }}" {% if forloop.first %}checked{% endif %}> {{ s }}
            </label>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Quantity stepper -->
      <div class="qty-control" data-qty>
        <button type="button" class="qty-btn" data-qty-dec>âˆ’</button>
        <span class="qty-val" aria-live="polite">1</span>
        <button type="button" class="qty-btn" data-qty-inc>+</button>
      </div>

      <button class="btn primary" id="add-to-cart"
        data-variants='{{ page.variant_ids | jsonify }}'
        data-title="{{ page.title }}"
        data-price="{{ page.price | sprintf: "%.2f" }}"
        data-img="{{ page.featured_image | relative_url }}">
        Add to cart
      </button>

      {% if page.sku %}<p class="sku">SKU: {{ page.sku }}</p>{% endif %}

    </div>
  </div>
</article>

<script>
(function(){
  const hero = document.getElementById('hero');
  const thumbsEl = document.getElementById('thumbs');
  const colorRadios = document.querySelectorAll('input[name="color"]');
  const variants = JSON.parse(document.getElementById('add-to-cart').dataset.variants || '{}');

  // Parse images safely
  const productImages = JSON.parse('{{ page.images | jsonify | escape }}');

  function renderThumbs(color) {
    thumbsEl.innerHTML = '';
    const imgs = productImages[color] || [];
    imgs.forEach(url => {
      const btn = document.createElement('button');
      btn.className = 'thumb';
      const img = document.createElement('img');
      img.src = url;
      img.alt = color;
      btn.appendChild(img);
      btn.addEventListener('click', ()=>{ hero.src = url; hero.decoding='sync'; });
      thumbsEl.appendChild(btn);
    });
    if(imgs.length) hero.src = imgs[0];
  }

  // Initial render
  renderThumbs(document.querySelector('input[name="color"]:checked')?.value);

  // Update gallery when color changes
  colorRadios.forEach(radio=>{
    radio.addEventListener('change', e=>{ renderThumbs(e.target.value); });
  });

  // Quantity stepper
  document.addEventListener('click', e=>{
    const dec = e.target.closest('[data-qty-dec]');
    const inc = e.target.closest('[data-qty-inc]');
    if(!dec && !inc) return;
    const wrap = (dec||inc).closest('[data-qty]');
    const valEl = wrap.querySelector('.qty-val');
    let n = parseInt(valEl.textContent||'1',10);
    n += inc?1:-1;
    n = Math.max(1,Math.min(99,n));
    valEl.textContent = n;
  });

  // Add to cart
  document.getElementById('add-to-cart').addEventListener('click', ()=>{
    const selectedColor = document.querySelector('input[name="color"]:checked')?.value;
    const selectedSize = document.querySelector('input[name="size"]:checked')?.value;
    const key = selectedColor + "|" + selectedSize;
    const variantId = variants[key];
    const qty = parseInt(document.querySelector('.qty-val').textContent||'1',10);

    if(!variantId){ alert('Please pick a size and color.'); return; }

    window.dispatchEvent(new CustomEvent('tm:add', { detail:{
      id:String(variantId), qty,
      title: document.getElementById('add-to-cart').dataset.title,
      price: document.getElementById('add-to-cart').dataset.price,
      img: hero.src
    }}));
  });
})();
</script>

<style>
  .product-grid{ display:grid; grid-template-columns:1.2fr 1fr; gap:2rem; align-items:start; }
  .gallery img{ width:100%; border-radius:12px; display:block; }
  .thumbs{ display:flex; gap:.5rem; margin-top:.5rem; flex-wrap:wrap; }
  .thumb{ border:0; background:transparent; padding:0; cursor:pointer; }
  .thumb img{ width:80px; height:80px; object-fit:cover; border-radius:10px; }

  .details .badge{ display:inline-block; margin-bottom:.5rem; padding:.25rem .5rem; border-radius:999px; background:#eef; }
  .price{ font-size:1.25rem; font-weight:600; margin:.25rem 0 1rem; }
  .desc{ margin-bottom:1rem; }
  .sizes, .colors{ display:flex; gap:.5rem; margin:.5rem 0 1rem; flex-wrap:wrap; }
  .size, .color-option{ border:1px solid var(--border); border-radius:10px; padding:.4rem .6rem; cursor:pointer; }
  .size input, .color-option input{ margin-right:.35rem; }

  .qty-control{ display:inline-flex; align-items:center; gap:.5rem; margin:.5rem 0 1rem; border:1px solid var(--border); border-radius:10px; padding:.25rem; }
  .qty-btn{ width:32px; height:32px; border:0; background:#f6f6f6; border-radius:8px; font-size:1.1rem; line-height:1; cursor:pointer; }
  .qty-val{ min-width:2ch; text-align:center; font-variant-numeric: tabular-nums; }

  .btn.primary{ background: linear-gradient(90deg, var(--brand, #9F1D2D), var(--navy, #3B3C78)); color:#fff; border:0; font-weight:700; box-shadow: 0 10px 24px rgba(20,37,94,.18); width:100%; justify-content:center; border-radius:12px; }
  .btn.primary:hover{ transform: translateY(-1px); }

  .sku{ margin-top:.5rem; color:var(--muted); font-size:.9rem; }

  @media (max-width:960px){ .product-grid{ grid-template-columns:1fr; } }

  /* Badge colors */
  .details .badge.badge-collab{ background: linear-gradient(90deg, var(--brand, #9F1D2D), var(--navy, #3B3C78)); color:#fff; border-color: transparent; }
  .details .badge.badge-new{ background: var(--brand, #9F1D2D); color:#fff; border-color: transparent; }
  .details .badge.badge-bestseller{ background: var(--navy, #3B3C78); color:#fff; border-color: transparent; }
  .details .badge.badge-limited,.details .badge.badge-limited-edition{ background:#111827; color:#fff; border-color: transparent; }
  .details .badge.badge-sale{ background: #e11d48; color:#fff; border-color: transparent; }
</style>





<style>
  .product-grid{ display:grid; grid-template-columns:1.2fr 1fr; gap:2rem; align-items:start; }
  .gallery img{ width:100%; border-radius:12px; display:block; }
  .thumbs{ display:flex; gap:.5rem; margin-top:.5rem; flex-wrap:wrap; }
  .thumb{ border:0; background:transparent; padding:0; cursor:pointer; }
  .thumb img{ width:80px; height:80px; object-fit:cover; border-radius:10px; }

  .details .badge{ display:inline-block; margin-bottom:.5rem; padding:.25rem .5rem; border-radius:999px; background:#eef; }
  .price{ font-size:1.25rem; font-weight:600; margin:.25rem 0 1rem; }
  .desc{ margin-bottom:1rem; }
  .sizes{ display:flex; gap:.5rem; margin:.5rem 0 1rem; flex-wrap:wrap; }
  .size{ border:1px solid var(--border); border-radius:10px; padding:.4rem .6rem; cursor:pointer; }
  .size input{ margin-right:.35rem; }

  /* Qty stepper */
  .qty-control{ display:inline-flex; align-items:center; gap:.5rem; margin:.5rem 0 1rem; border:1px solid var(--border); border-radius:10px; padding:.25rem; }
  .qty-btn{ width:32px; height:32px; border:0; background:#f6f6f6; border-radius:8px; font-size:1.1rem; line-height:1; cursor:pointer; }
  .qty-val{ min-width:2ch; text-align:center; font-variant-numeric: tabular-nums; }

  .btn.buy-btn{ display:inline-block; padding:.75rem 1rem; border-radius:12px; background:var(--navy); color:#fff; text-decoration:none; }
  .sku{ margin-top:.5rem; color:var(--muted); font-size:.9rem; }
  @media (max-width:960px){ .product-grid{ grid-template-columns:1fr; } }

  /* ---------- Product badge (pill) ---------- */
  .details .badge{
    display:inline-block;
    margin-bottom:.5rem;
    padding:.28rem .6rem;
    border-radius:999px;
    font-weight:700;
    font-size:.82rem;
    line-height:1;
    border:1px solid var(--border, rgba(11,18,32,.12));
    box-shadow: 0 6px 16px rgba(0,0,0,.08);
    background:#fff;            /* default/fallback */
    color: var(--ink, #0b1220); /* default/fallback */
  }

  /* Map common badges to your site colors (match Shop/Merch) */
  .details .badge.badge-collab{ 
    background: linear-gradient(90deg, var(--brand, #9F1D2D), var(--navy, #3B3C78));
    color:#fff; border-color: transparent;
  }
  .details .badge.badge-new{
    background: var(--brand, #9F1D2D); color:#fff; border-color: transparent;
  }
  .details .badge.badge-bestseller{
    background: var(--navy, #3B3C78); color:#fff; border-color: transparent;
  }
  .details .badge.badge-limited,
  .details .badge.badge-limited-edition{
    background:#111827; color:#fff; border-color: transparent;
  }
  .details .badge.badge-sale{
    background: #e11d48; color:#fff; border-color: transparent;
  }

  /* ---------- Gradient button assurance ---------- */
  .btn.primary{
    background: linear-gradient(90deg, var(--brand, #9F1D2D), var(--navy, #3B3C78));
    color:#fff; border:0;
    font-weight:700;
    box-shadow: 0 10px 24px rgba(20,37,94,.18);
  }
  .btn.primary:hover{ transform: translateY(-1px); }

  /* Optional: make Add to cart full-width on product page */
  #add-to-cart{ width:100%; justify-content:center; border-radius:12px; }

</style>
